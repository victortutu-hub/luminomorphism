
/*!
 * l-loader-protected.min.js - Protected JS Loader
 * Copyright (c) 2025 Mihai Victor
 * Licensed only for use in Luminomorphism project
 */class LLoaderProtected extends HTMLElement{static get observedAttributes(){return["files","endpoint"]}constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){this.loadProtectedScripts()}async loadProtectedScripts(){const f=(this.getAttribute("files")||"").split(",").map(e=>e.trim()),e=this.getAttribute("endpoint")||"",t=e.replace(/\/js\/.*$/,"/token/");try{const n=await fetch(t,{headers:{"ngrok-skip-browser-warning":"true"}});if(!n.ok)throw new Error("Token request failed");const{token:tkn}=await n.json();for(const name of f){const u=`${e}${name}?token=${tkn}`;const r=await fetch(u,{headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok)throw new Error(`Failed to fetch ${name}`);const c=await r.text(),s=document.createElement("script");s.textContent=c;document.head.appendChild(s)}}catch(err){console.warn("üîÅ Fallback activated");for(const name of f){const s=document.createElement("script");s.src=`/luminomorphism/fallback/${name.replace(".js",".min.js")}`;document.head.appendChild(s)}}}customElements.define("l-loader-protected",LLoaderProtected);
