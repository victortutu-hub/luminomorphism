class LParticleNet extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const e=document.createElement("canvas");this.canvas=e,this.ctx=e.getContext("2d"),this.shadowRoot.appendChild(e),this.nodes=[],this.mouse={x:null,y:null},this.config={count:parseInt(this.getAttribute("nodes"))||32,maxDist:120,radius:2.8,glowColor:this.getAttribute("color")||"#00ffff",speed:parseFloat(this.getAttribute("speed"))||.4}}connectedCallback(){this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas()),this.shadowRoot.host.addEventListener("pointermove",e=>{const o=this.canvas.getBoundingClientRect();this.mouse.x=e.clientX-o.left,this.mouse.y=e.clientY-o.top}),this.shadowRoot.host.addEventListener("pointerleave",()=>{this.mouse.x=this.mouse.y=null}),this.initNodes(),requestAnimationFrame(()=>this.animate())}resizeCanvas(){this.canvas.width=this.offsetWidth,this.canvas.height=this.offsetHeight}initNodes(){const{speed:e}=this.config;this.nodes=Array.from({length:this.config.count},()=>({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vx:(Math.random()-.5)*e,vy:(Math.random()-.5)*e}))}reset(){this.config.count=parseInt(this.getAttribute("nodes"))||32,this.config.speed=parseFloat(this.getAttribute("speed"))||.4,this.config.glowColor=this.getAttribute("color")||"#00ffff",this.initNodes()}animate(){const{ctx:e,canvas:o,config:n,nodes:s,mouse:a}=this;e.clearRect(0,0,o.width,o.height);for(let t of s)t.x+=t.vx,t.y+=t.vy,(t.x<=0||t.x>=o.width)&&(t.vx*=-1),(t.y<=0||t.y>=o.height)&&(t.vy*=-1);for(let t=0;t<s.length;t++){for(let i=t+1;i<s.length;i++){const h=s[t].x-s[i].x,r=s[t].y-s[i].y,d=Math.sqrt(h*h+r*r);if(d<n.maxDist){const c=1-d/n.maxDist;e.strokeStyle=`rgba(0,255,255,${c*.25})`,e.lineWidth=1,e.beginPath(),e.moveTo(s[t].x,s[t].y),e.lineTo(s[i].x,s[i].y),e.stroke()}}if(a.x&&a.y){const i=s[t].x-a.x,h=s[t].y-a.y,r=Math.sqrt(i*i+h*h);if(r<n.maxDist*1.2){const d=1-r/(n.maxDist*1.2);e.strokeStyle=`rgba(0,255,255,${d*.2})`,e.lineWidth=.8,e.beginPath(),e.moveTo(s[t].x,s[t].y),e.lineTo(a.x,a.y),e.stroke()}}}for(let t of s){const i=e.createRadialGradient(t.x,t.y,0,t.x,t.y,n.radius*4);i.addColorStop(0,`${n.glowColor}88`),i.addColorStop(1,"#00000000"),e.fillStyle=i,e.beginPath(),e.arc(t.x,t.y,n.radius,0,Math.PI*2),e.fill()}requestAnimationFrame(()=>this.animate())}}customElements.define("l-particle-net",LParticleNet);
